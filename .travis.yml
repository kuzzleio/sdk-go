jobs:
  include:
# ---------------------------------------------
# Linux Builds
# ---------------------------------------------
    - name: "Linux amd64 - Go latest"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "master"

      env:
        - GOOS=linux 
        - GOARCH=amd64

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

      after_success:
        - bash <(curl -s https://codecov.io/bash)

    - name: "Linux amd64 - Go 1.11.x"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "1.11.x"

      env:
        - GOOS=linux 
        - GOARCH=amd64

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

    - name: "Linux amd64 - Go 1.10.x"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "1.10.x"

      env:
        - GOOS=linux 
        - GOARCH=amd64

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

    - name: "Linux arm64 - Go latest"
      os: linux
      dist: xenial
      sudo: true

      addons:
        apt:
          packages:
          - qemu-user-static

      language: go
      go: "master"

      env:
        - GOOS=linux 
        - GOARCH=arm64

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - qemu-aarch64-static ./test.sh

    - name: "Linux i386 - Go latest"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "master"

      env:
        - GOOS=linux 
        - GOARCH=386

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

    - name: "Linux i386 - Go 1.11.x"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "1.11.x"

      env:
        - GOOS=linux 
        - GOARCH=386

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

    - name: "Linux i386 - Go 1.10.x"
      os: linux
      dist: xenial
      sudo: true

      language: go
      go: "1.10.x"

      env:
        - GOOS=linux 
        - GOARCH=386

      cache:
        directories:
          - $HOME/.cache/go-build
          - $HOME/gopath/pkg
      
      script:
        - ./test.sh

    - name: "MacOS amd64 - Go latest"
      os: osx

      language: go
      go: "master"

      cache:
        directories:
          - $HOME/Library/Caches/go-build
          - $HOME/gopath/pkg
      env:
        - GOOS=darwin
        - GOARCH=amd64

      script:
        - ./test.sh

    - name: "MacOS amd64 - Go 1.11.x"
      os: osx

      language: go
      go: "1.11.x"

      cache:
        directories:
          - $HOME/Library/Caches/go-build
          - $HOME/gopath/pkg
      env:
        - GOOS=darwin
        - GOARCH=amd64

      script:
        - ./test.sh

    - name: "MacOS amd64 - Go 1.10.x"
      os: osx

      language: go
      go: "1.10.x"

      cache:
        directories:
          - $HOME/Library/Caches/go-build
          - $HOME/gopath/pkg
      env:
        - GOOS=darwin
        - GOARCH=amd64

      script:
        - ./test.sh

    - name: "Windows amd64 - Go latest"
      os: windows

      language: go
      go: "master"

      env:
        - GOOS=windows
        - GOARCH=amd64

      script:
        - go test -v ./...

    - name: "Windows amd64 - Go 1.11.x"
      os: windows

      language: go
      go: "1.11.x"

      env:
        - GOOS=windows
        - GOARCH=amd64

      script:
        - go test -v ./...

    - name: "Windows amd64 - Go 1.10.x"
      os: windows

      language: go
      go: "1.10.x"

      env:
        - GOOS=windows
        - GOARCH=amd64

      script:
        - go test -v ./...
