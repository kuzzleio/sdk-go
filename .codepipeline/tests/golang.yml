version: 0.2

phases:
  install:
    commands:
      - cp -fr ./* /go/src/github.com/kuzzleio/sdk-go/
      - cd /go/src/github.com/kuzzleio/sdk-go
      - go get ./...
  build:
    commands:
      - gofmt -l .
      - gofmt -l ./internal/wrappers
      - for d in $(go list ./... | grep -v vendor); do go test -timeout 1m -covermode=count "$d"; done
artifacts:
  files:
    - '**/*'
    - '.codepipeline/*'
  base-directory: '${CODEBUILD_SRC_DIR}'
